REFACTOR code because I fucked up specially in cache files

I should find a way to manage cache files and escape in better way
